<!DOCTYPE html>
<html>
    <head>
        <title>transit.js</title>
        <meta charset='utf-8'>
        <link rel="stylesheet" href="index.css">
        <link rel="shortcut icon" type="image/png" href="favicon.ico">
        <script src="http://code.jquery.com/jquery-1.10.1.min.js"><script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44036056-1', 'onloop.net');
            ga('send', 'pageview');
        </script>
        <script>
            $(document).ready(function () {
                $('#clicktoshow').click(function () {
                    if ($('.hide').is(':hidden')) {
                        $('.hide').slideDown('fast');
                        $('#clicktoshow').html('Hide');
                    } else {
                        $('.hide').slideUp('fast');
                        $('#clicktoshow').html('Show');
                    }
                });
            });
        </script>
    </head>
    <body>
        <a href="https://github.com/pranavrc/transit"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
        <h1>transit.js</h1>
        <div id="exp">Make client-side, schedule-driven transit maps.</div><hr /><br />
        <div id="parent">
            <strong>Transit</strong> lets you build completely client-side maps of schedule-based transit systems. There's no webserver involved, the browser does all the work. <a href="http://onloop.net/chennairail">Here's</a> what a Transit app looks like in action.<br />
            <hr />
            <div id="list">
                <ul>
                    <li><a href="#intro">What's this?</a></li>
                    <li><a href="#download">Download and Usage.</a></li>
                    <li><a href="#get_started">Getting started.</a></li>
                    <li><a href="#kml">Making your transit routes.</a></li>
                    <li><a href="#json">Scheduling your vehicles.</a></li>
                    <li><a href="#index">The Code.</a></li>
                </ul>
            </div><hr />

            <div id="intro">
                <h3>What's this?</h3>
                Transit takes a set of transit routes or paths, and a set of vehicles and their schedules, and simulates their movement on the given routes in a Google map (I'm working on <a href="http://openstreetmap.org">OSM</a> support), based on the schedule. The transit routes are defined in a <strong>KML</strong> (<a href=http://en.wikipedia.org/wiki/Keyhole_Markup_Language">Keyhole Markup Language</a>) file, and the vehicle schedules are written in a <strong>JSON</strong> (<a href="http://en.wikipedia.org/wiki/JSON">JavaScript Object Notation</a>) file.<br /><br />

                To create the KML file, you can use a maps editor tool that can export visual geographic data as one. There are several, but the one I personally use is <a href="https://mapsengine.google.com/map/">Maps Engine Lite</a>, Google's free online Maps editor that lets you work with Google maps. For the JSON, you can use a JSON editor. If you're writing <a href="https://github.com/pranavrc/chennairail/blob/gh-pages/chennai_rail_schedule.json">a lot of</a> schedules, though, Vim or Emacs might save your sanity.<br /><br />

                The <a href="http://onloop.net/chennairail">Chennai Suburban Rail Map</a> uses <a href="https://github.com/pranavrc/chennairail/blob/gh-pages/chennai_rail_map.kml">this</a> KML file and <a href="https://github.com/pranavrc/chennairail/blob/gh-pages/chennai_rail_schedule.json">this</a> JSON file.

                Transit comes with an Event log that logs arrival and departure times, and status and info windows for displaying current information about vehicles.
            </div>
            <hr />
            <div id="download">
                <h3>Download and Usage.</h3>
                You can download Transit in a zipped file from <a href="https://github.com/pranavrc/transit/archive/master.zip">here</a>. Transit requires <a href="http://jquery.com/">jQuery 1.10.1</a>, and the <a href="https://developers.google.com/maps/documentation/javascript/">Google Maps JavaScript API V3</a>, so you'll have to include those too. The following should do:<br />
                <div id="code">
                    &lt;script src="http://code.jquery.com/jquery-1.10.1.min.js"&gt;&lt;script&gt;<br />
                    &lt;script src="http://maps.googleapis.com/maps/api/js?key={API_KEY}&sensor=false"&gt;&lt;script&gt;<br />
                    &lt;script src="transit-min.js"&gt;&lt;/script&gt;<br />
                </div>
                The API_KEY for your app is optional, but it helps you with analytics, so if you plan to get one, start <a href="https://developers.google.com/maps/documentation/javascript/tutorial#api_key">here</a>.
            </div>
            <hr />
            <div id="get_started">
                <h3>Getting started.</h3>
                Do you know that all railroads lead to Rome? One of them starts from Tokyo, goes to Being and Moscow, and ends in Rome. Well, not really, but let's make one anyway. We're going to draw the route from Tokyo to Beijing to Moscow to Rome and schedule a train called the <em>Grand Intercontinental Maglev</em> to make a stopping run from Tokyo to Rome, covering the distance in less than 2 minutes. That's right, we're gonna use ultra-powerful magnetic fields for ultra-powerful magnetic levitation.<br /><br />
                Fire up <a href="https://mapsengine.google.com/map/">Maps Engine Lite</a> and log in with your Google Account if you use one. <strong>Take a tour</strong>, if you wish.
            </div>
            <hr />
            <div id="kml">
                <h3>Making your transit routes.</h3>
                <a href="images/stops.jpg"><img src="images/stops.jpg" alt="Image of stops in the route"></a><br />
                First off, we place markers at all our stops, viz., Tokyo, Beijing, Moscow and Rome. You can search for them and add the marker to the map from the search result. If you manually place the markers, set their names and descriptions (optional).<br /><br />
                <a href="images/line.jpg"><img src="images/line.jpg" alt="Image of the route"></a><br />
                Then, we draw the route between our stops. If there was a real railroad between your markers, you might want to trace through it. We'll draw a random railroad here, and name it. Notice how I placed line-points (the white circles that demarcate the line) below all the markers? Don't forget to do that - <strong>the markers just name the stops, the points are the actual stops</strong>.<br /><br />That said, it's completely fine if you don't accurately place the points on the marker's bases. Transit will automatically resolve your markers' positions to the positions of the closest points on the line.<br /><br />
                <a href="images/export.jpg"><img src="images/export.jpg" alt="Image of the export option"></a><br />
                Self-explanatory. Once we're done, we export our map to KML.<br /><br />
                <a href="images/download.jpg"><img src="images/download.jpg" alt="Image of the Download option"></a><br />
                If you create multiple layers, export the <strong>Entire map</strong>. If it's just one layer, it doesn't matter, because that layer IS the entire map. We'll save our KML file as <strong>railroad_to_rome.kml</strong>.<br /><br />
                <strong>NOTE:</strong><br />
                1. Multiple stops must not have the same name. If you have two stops in the route that share a name, just name them <strong>&lt;Stopname&gt; #1</strong> and <strong>&lt;Stopname&gt; #2</strong> (Tokyo #1 and Tokyo #2) or similar.<br />
                2. A route/line must not pass through the same stop more than once. If you need this functionality, make two markers and points for a single stop, and again, name them <strong>&lt;Stopname&gt; #1</strong> and <strong>&lt;Stopname&gt; #2</strong>.
            </div>
            <hr />
            <div id="json">
                <h3>Scheduling your vehicles.</h3>
                Let's create a JSON file and name it <strong>railroad_to_rome_schedule.json</strong>. The schedule file needs to have the following format:<br /><br />
                <span id="clicktoshow">Show</span><br /><br />
                <div id="code" class="hide">
                    {<br />
                    &nbsp;&nbsp;&nbsp;<strong>"timezone"</strong>: "+/-HH:MM:(Optional SS, default 00)", (UTC offset in HH:MM:SS for the timezone you're gonna use)<br />
                    &nbsp;&nbsp;&nbsp;<strong>"defaultstopinterval"</strong>: "HH:MM:(Optional SS, default 00)", (If one of arrival or departure isn't specified for a stop, it's calculated using this interval. This is useful when you have to write schedules for vehicles that have a consistent stopping time of, say, 00:01:00. This doesn't apply to the first stop and the last one, because the first stop needs a mandatory departure time specified and the last one needs an arrival time specified)<br />
                    &nbsp;&nbsp;&nbsp;<strong>"vehicles"</strong>: (We write a list of vehicles and their schedules under this)<br />
                    &nbsp;&nbsp;&nbsp;[<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"name"</strong>: "Vehicle #1",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"info"</strong>: "Vehicle #1 Info", (Optional)<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"route"</strong>: "Vehicle #1 Route", (Name of the route in which it will travel, that we drew on the KML map)<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"stops"</strong>: (The schedule)<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"name"</strong>: "Stop #1", (Name of a stop in the route, that we defined with a marker in the map)<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"departure"</strong>: { <strong>"time"</strong>:"HH:MM:(Optional SS, default 00)", <strong>"day"</strong>: Integer (Calendar day starting with 00:00:00 and ending with 23:59:59, NOT the day of travel) }<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"name"</strong>: "Stop #2",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"arrival"</strong>: { <strong>"time"</strong>:"HH:MM:SS", <strong>"day"</strong>: Integer },<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"departure"</strong>: { <strong>"time"</strong>:"HH:MM:SS", <strong>"day"</strong>: Integer }<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"name"</strong>: "Stop #N",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"arrival"</strong>: { <strong>"time"</strong>:"HH:MM:SS", <strong>"day"</strong>: Integer }<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"name"</strong>: "Vehicle #N",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"info"</strong>: "Vehicle #N Info",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"route"</strong>: "Vehicle #N Route",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"stops"</strong>:<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"name"</strong>: "Stop #1",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"departure"</strong>: { <strong>"time"</strong>:"HH:MM:(Optional SS, default 00)", <strong>"day"</strong>: Integer }<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"name"</strong>: "Stop #2",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"arrival"</strong>: { <strong>"time"</strong>:"HH:MM:SS", <strong>"day"</strong>: Integer },<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"departure"</strong>: { <strong>"time"</strong>:"HH:MM:SS", <strong>"day"</strong>: Integer }<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;..<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"name"</strong>: "Stop #N",<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>"arrival"</strong>: { <strong>"time"</strong>:"HH:MM:SS", <strong>"day"</strong>: Integer }<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
                    &nbsp;&nbsp;&nbsp;]<br />
                    }
                </div>
                So let's schedule our Grand Intercontinental Maglev.
            </div>
            <hr />
            <div id="index">
                <h3>The Code.</h3>
            </div>
        </div><hr />
        <div id="footer">&copy; <a href="http://onloop.net">Pranav Ravichandran.</a></div>
    </body>
</html>
